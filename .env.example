# =============================================================================
# INMOBILIARIA SYSTEM - Environment Configuration
# Level 1 Foundation - Optimized Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE (Required)
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://app:CHANGE_ME_STRONG_PASSWORD@database:5432/inmobiliaria

# Database name (for docker-compose)
DB_NAME=inmobiliaria
DB_USER=app
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# -----------------------------------------------------------------------------
# CACHE (Optional - falls back to memory cache)
# -----------------------------------------------------------------------------
# Redis/KeyDB connection string
REDIS_URL=redis://cache:6379/0

# -----------------------------------------------------------------------------
# SERVER
# -----------------------------------------------------------------------------
PORT=3000
NODE_ENV=production

# Application version (set by CI/CD)
APP_VERSION=1.0.0

# -----------------------------------------------------------------------------
# SECURITY - JWT (Required)
# -----------------------------------------------------------------------------
# JWT secret key - Generate with: openssl rand -base64 64
# MUST be at least 32 characters, RECOMMENDED 64+
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_64

# JWT issuer and audience for token validation
JWT_ISSUER=inmobiliaria-system
JWT_AUDIENCE=inmobiliaria-api

# JWT token expiry settings
ACCESS_TOKEN_EXPIRY=15m
REFRESH_TOKEN_EXPIRY_DAYS=7

# -----------------------------------------------------------------------------
# SECURITY - ENCRYPTION (Required)
# -----------------------------------------------------------------------------
# Master key for PII field encryption - Generate with: openssl rand -base64 64
# MUST be at least 32 characters, RECOMMENDED 64+
ENCRYPTION_MASTER_KEY=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_64

# -----------------------------------------------------------------------------
# SECURITY - SESSION
# -----------------------------------------------------------------------------
# Maximum concurrent sessions per user
MAX_CONCURRENT_SESSIONS=5

# Cookie security (MUST be true in production)
COOKIE_SECURE=true

# -----------------------------------------------------------------------------
# SECURITY - ACCOUNT LOCKOUT
# -----------------------------------------------------------------------------
# Maximum failed login attempts before lockout
LOCKOUT_MAX_ATTEMPTS=5

# -----------------------------------------------------------------------------
# SECURITY - MFA (Optional)
# -----------------------------------------------------------------------------
# Issuer name shown in authenticator apps
MFA_ISSUER=Inmobiliaria System

# WebAuthn configuration (for biometric auth)
# WEBAUTHN_RP_ID=yourdomain.com
# WEBAUTHN_ORIGIN=https://yourdomain.com

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
# Directory for uploaded files
UPLOAD_DIR=/app/uploads

# Maximum file size in megabytes
MAX_FILE_SIZE_MB=10

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
# General rate limit
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100

# Stricter auth endpoint rate limit
AUTH_RATE_LIMIT_MAX=10

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
# Log level: debug | info | warn | error | fatal
LOG_LEVEL=info

# Log format: json (production) | pretty (development)
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# SECURITY HEADERS
# -----------------------------------------------------------------------------
# Enable HTTP Strict Transport Security
ENABLE_HSTS=true

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment for local development:
#
# NODE_ENV=development
# LOG_LEVEL=debug
# LOG_FORMAT=pretty
# DATABASE_URL=postgresql://app:devpass123@localhost:5432/inmobiliaria
# REDIS_URL=redis://localhost:6379/0
